<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Kembil School Portal Login</title>
  <style>
    body {
      background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)),
                  url('https://i.postimg.cc/Sx00hSDH/1760272406892-2.jpg') center/cover no-repeat;
      font-family: "Poppins", sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      color: white;
      flex-direction: column;
    }

    .logo {
      margin-bottom: 15px;
      text-align: center;
    }

    .logo img {
      width: 100px; /* adjust size as you like */
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      box-shadow: 0 4px 10px rgba(0,0,0,0.4);
      background: white;
      padding: 5px;
    }

    .login-box {
      background: rgba(255, 255, 255, 0.95);
      padding: 35px;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
      text-align: center;
      width: 300px;
    }

    h2 {
      color: #1e3a8a;
      margin-bottom: 20px;
    }

    input {
      padding: 10px;
      margin: 8px 0;
      width: 100%;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 14px;
    }

    button {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      background-color: darkgreen;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      transition: background 0.3s ease;
    }

    button:hover {
      background-color: #145214;
    }

    .link {
      color: #1e3a8a;
      font-size: 14px;
      text-decoration: none;
      display: block;
      margin-top: 12px;
    }
  
    /* Message Modal */
.modal {
  display: none;
  position: fixed;
  z-index: 9999;
  left: 0; top: 0;
  width: 100%; height: 100%;
  background-color: rgba(0,0,0,0.6);
  justify-content: center;
  align-items: center;
  animation: fadeInBg 0.3s ease;
}

/* Modal Box */
.modal-content {
  background: white;
  color: black;
  padding: 25px;
  border-radius: 12px;
  width: 80%;
  max-width: 320px;
  text-align: center;
  box-shadow: 0 4px 20px rgba(0,0,0,0.3);
  border-top: 6px solid;
  animation: popUp 0.4s ease;
  opacity: 0;
  transform: scale(0.8);
  transition: all 0.4s ease;
}

.modal.show .modal-content {
  opacity: 1;
  transform: scale(1);
}

/* Message text */
.modal-content p {
  margin-bottom: 15px;
  font-size: 15px;
  font-weight: 500;
}

/* OK Button */
.modal-content button {
  background-color: #222;
  color: white;
  border: none;
  padding: 8px 20px;
  border-radius: 6px;
  font-weight: bold;
  cursor: pointer;
  transition: background 0.3s;
}

.modal-content button:hover {
  background-color: #111;
}

/* Color Variants */
.modal-blue {
  border-color: #007bff;
}

.modal-red {
  border-color: #dc3545;
}

  .whatsapp-float {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background-color: #25d366;
    color: white;
    padding: 12px 15px;
    border-radius: 50px;
    text-decoration: none;
    font-size: 20px;
    z-index: 1000;
  }
  .ai-bot {
    position: fixed;
    bottom: 80px;
    right: 20px;
    background-color: var(--blue);
    color: white;
    padding: 10px 15px;
    border-radius: 10px;
    font-size: 14px;
    cursor: pointer;
    z-index: 1000;
  }

/* Animations */
@keyframes popUp {
  from { opacity: 0; transform: scale(0.8); }
  to { opacity: 1; transform: scale(1); }
}

@keyframes fadeInBg {
  from { background-color: rgba(0,0,0,0); }
  to { background-color: rgba(0,0,0,0.6); }
}

@keyframes fadeOut {
  from { opacity: 1; transform: scale(1); }
  to { opacity: 0; transform: scale(0.8); }
}
  </style>
</head>
<body>

  <!-- Logo Section -->
  <div class="logo">
    <img src="https://i.postimg.cc/cJXRGcQS/1760276323380.jpg" alt="Kembil School Logo">
  </div>

  <!-- Login Box -->
  <div class="login-box">
    <h2>School Portal Login</h2>
    <input type="email" id="email" placeholder="Email" /><br>
    <input type="password" id="password" placeholder="Password" /><br>
    <button onclick="login()">Login</button>
    <a class="link" href="#" onclick="resetPassword()">Forgot Password?</a>
  </div>
  <!-- Animated Message Box -->
<div id="messageModal" class="modal">
  <div class="modal-content" id="messageBox">
    <p id="messageText"></p>
    <button id="closeBtn" onclick="closeMessage()">OK</button>
  </div>
</div>
</body>
<a class="whatsapp-float"
   href="https://wa.me/2348067032930?"
   target="_blank" rel="noopener" title="Chat with us on WhatsApp" aria-label="Chat with us on WhatsApp">
  <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg"
       alt="WhatsApp" style="width:28px;height:28px;vertical-align:middle;">
  <!-- Firebase SDK (v10 modular) -->
<script 
type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js";
  import { getAuth, signInWithEmailAndPassword, sendPasswordResetEmail } 
    from "https://www.gstatic.com/firebasejs/10.5.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDtvLEYFnNmmge6WYTrlrO2BTtkqgBWYxg",
    authDomain: "kembil-schools.firebaseapp.com",
    projectId: "kembil-schools",
    storageBucket: "kembil-schools.appspot.com",
    messagingSenderId: "897542186994",
    appId: "1:897542186994:web:36282b2f8729065edcad6b",
    measurementId: "G-BWGXQ0BSC4"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  // Show animated message box
  window.showMessage = function(message, type = "blue", autoClose = true) {
    const modal = document.getElementById("messageModal");
    const box = document.getElementById("messageBox");
    const text = document.getElementById("messageText");
    const closeBtn = document.getElementById("closeBtn");

    text.textContent = message;
    box.className = "modal-content modal-" + type;
    modal.style.display = "flex";

    // Trigger animation
    requestAnimationFrame(() => modal.classList.add("show"));

    if (autoClose && type === "blue") {
      closeBtn.style.display = "none";
      setTimeout(() => closeMessage(true), 2000);
    } else {
      closeBtn.style.display = "inline-block";
    }
  };

  // Close message with fade-out
  window.closeMessage = function(auto = false) {
    const modal = document.getElementById("messageModal");
    const box = document.getElementById("messageBox");
    box.style.animation = "fadeOut 0.4s ease";
    setTimeout(() => {
      modal.style.display = "none";
      box.style.animation = "";
    }, 400);
  };

  // Login Function
  window.login = function() {
    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value.trim();
    const btn = document.querySelector("button");

    if (!email || !password) {
      showMessage("Please fill in both email and password.", "red", false);
      return;
    }

    btn.disabled = true;
    btn.textContent = "Logging in...";

    signInWithEmailAndPassword(auth, email, password)
      .then(() => {
        showMessage("‚úÖ Login successful! Redirecting...", "blue", true);
        setTimeout(() => {
          window.location.href = "dashboard.html";
        }, 2000);
      })
      .catch(err => {
  let message = "An unexpected error occurred.";
  
  if (err.code === "auth/invalid-email") message = "Invalid email address.";
  else if (err.code === "auth/user-disabled") message = "This account has been disabled.";
  else if (err.code === "auth/user-not-found") message = "No user found with this email.";
  else if (err.code === "auth/wrong-password") message = "Incorrect password.";
  else if (err.code === "auth/network-request-failed") message = "Network error ‚Äî please check your internet connection.";
  else if (err.code === "auth/invalid-login-credentials") message = "Invalid login credentials.";
  else if (err.code === "auth/too-many-requests") message = "Too many failed attempts. Try again later.";
  else message = err.message.replace("Firebase: Error", "Error");

  showMessage("‚ùå " + message, "red", false);

  const btn = document.querySelector("button");
  btn.disabled = false;
  btn.textContent = "Login";
});
  };

  // Reset Password
  window.resetPassword = function() {
    const email = document.getElementById("email").value.trim();
    if (!email) {
      showMessage("Please enter your email address first.", "red", false);
      return;
    }

    sendPasswordResetEmail(auth, email)
      .then(() => showMessage("üìß Password reset link sent!", "blue", true))
      .catch(err => showMessage("‚ùå " + err.message, "red", false));
  };
</script>
</html>